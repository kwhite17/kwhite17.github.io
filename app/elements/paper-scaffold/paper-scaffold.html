<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-location/iron-location.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animation.html">
<link rel="import" href="../../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">

<dom-module id="paper-scaffold">
  <style is="custom-style">
    :host {
      height: inherit;
    }

    :host .navLink {
      background-color: #80DEEA;
      color: black;
      cursor: pointer;
    }

    :host paper-drawer-panel {
      --paper-drawer-panel-main-container: {
        background-color: #E0F7FA;
      }
      ;
      --paper-drawer-panel-left-drawer-container: {
        background-color: #80DEEA;
      };
    }

    :host paper-menu {
      background-color: #80DEEA;
    }

    :host paper-toolbar {
      background-color: #00ACC1;
    }
  </style>
  <template>
    <iron-location hash="{{currentPage}}"></iron-location>
    <paper-drawer-panel>
      <paper-header-panel drawer>
        <paper-toolbar>
          <div>
            <span class="title">Kevin White</span>
          </div>
        </paper-toolbar>
        <paper-menu attr-for-selected="title" selected="{{currentPage}}">
          <template is="dom-repeat" items="{{pages}}">
            <paper-item title$="{{item}}" class="navLink">{{item}}</paper-item>
          </template>
        </paper-menu>
      </paper-header-panel>
      <paper-header-panel main>
        <paper-toolbar>
          <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
          <div>
            <span class="title">{{currentPage}}</span>
          </div>
        </paper-toolbar>
        <neon-animated-pages id="pages" attr-for-selected="name" entry-animation="fade-in-animation" exit-animation="fade-out-animation">
          <content></content>
        </neon-animated-pages>
      </paper-header-panel>
    </paper-drawer-panel>
  </template>
</dom-module>

<script>
  (function() {
    'use strict';

    Polymer({
      is: "paper-scaffold",

      properties: {

        pages: {
          type: Array,
          value: function() {
            return [];
          }
        },

        currentPage: {
          type: String,
          notify: true,
          observer: '_onCurrentPageChanged'
        }
      },

      attached: function() {
        this._buildPageMenu();
        this.currentPage = window.location.hash ? window.location.hash.substring(1) : this.pages[0];
        window.addEventListener("resize", this._updateIronPageSize);
        this._updateIronPageSize();
      },

      _onCurrentPageChanged: function(newValue) {
        this.$$('paper-drawer-panel').closeDrawer();
        this.$$('#pages').select(newValue);
      },

      _buildPageMenu: function() {
        var elements = this.querySelectorAll('.page');
        var i;

        for (i = 0; i < elements.length; i++) {
          this.push('pages', elements[i].getAttribute('name'));
        }
      },

      _updateIronPageSize: function() {
        var pages = document.querySelector('#pages');

        pages.style.height = pages.parentElement.clientHeight + "px";
      }
    });
  })();
</script>
</dom-module>
